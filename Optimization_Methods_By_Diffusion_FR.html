<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>méthodes d'optimisation classées</title>

  <!-- MathJax pour TeX -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['\\[','\\]']], tags: 'none' },
      svg: { fontCache: 'global', linebreaks: { automatic: true, width: 'container' } },
      options: { renderActions: { addMenu: [] } }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    :root {
      --bg-primary:#f7f9fc; --bg-secondary:#ffffff; --bg-tertiary:#eef2f8;
      --text-primary:#141a2a; --text-secondary:#4b5568;
      --accent-primary:#0b66ff; --accent-secondary:#7a3ff2;
      --accent-gradient:linear-gradient(135deg,#0b66ff 0%,#7a3ff2 100%);
      --border-color:#d9e1f2;
      --shadow:0 8px 24px rgba(11,102,255,.08);
      --hover-shadow:0 12px 36px rgba(11,102,255,.12);
    }
    [data-theme="dark"] {
      --bg-primary:#0a0e27; --bg-secondary:#151932; --bg-tertiary:#1e2139;
      --text-primary:#e4e7f5; --text-secondary:#a0a6c9;
      --accent-primary:#00d4ff; --accent-secondary:#7b2ff7;
      --accent-gradient:linear-gradient(135deg,#00d4ff 0%,#7b2ff7 100%);
      --border-color:#20304d;
      --shadow:0 8px 32px rgba(0,212,255,.10);
      --hover-shadow:0 12px 48px rgba(0,212,255,.18);
    }

    html, body { width:100%; height:100%; }
    body {
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg-primary); color:var(--text-primary); line-height:1.6;
    }

    .container { width:100%; padding:16px; }

    /* Barre de titre avec switch aligné à droite, relatif, bloc unique */
    .header {
      width:100%; background:var(--bg-secondary); border-radius:16px;
      padding:18px 16px; margin:20px 0 16px; box-shadow:var(--shadow);
      position:relative; display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .header::before { content:''; position:absolute; top:0; left:0; right:0; height:4px; background:var(--accent-gradient); border-top-left-radius:16px; border-top-right-radius:16px; }
    .title-wrap { display:block; text-align:center; flex:1 1 auto; }
    .title {
      font-size:1.9rem; font-weight:800; margin-bottom:4px;
      background:var(--accent-gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
    }
    .subtitle { color:var(--text-secondary); font-size:1.0rem; }

    /* Switch glissière (UN SEUL), position relative, côté droit du header */
    .theme-toggle {
      display:block; position:relative; flex:0 0 auto;
      align-self:flex-start;
      background:transparent; border:none; padding:0; margin:0;
    }
    .toggle {
      --w:54px; --h:28px;
      position:relative; display:inline-block; width:var(--w); height:var(--h);
      border-radius:var(--h); background:#c9d3ea;
      border:1px solid var(--border-color);
      cursor:pointer;
      vertical-align:middle;
      transition:background .2s ease;
    }
    .toggle::after {
      content:''; position:absolute; top:2px; left:2px;
      width:24px; height:24px; border-radius:50%;
      background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.15);
      transition:transform .2s ease;
    }
    .toggle[aria-pressed="true"] { background:#7a3ff2; }
    .toggle[aria-pressed="true"]::after { transform:translateX(24px); }
    .toggle-label {
      display:block; margin-top:6px; text-align:center;
      font-size:.85rem; color:var(--text-secondary);
    }

    .tools {
      width:100%; display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin:12px 0 10px;
    }
    .search-input {
      flex:1 1 auto; background:var(--bg-secondary); color:var(--text-primary);
      border:1px solid var(--border-color); border-radius:12px;
      padding:10px 12px; outline:none;
    }
    .clear-btn {
      background:transparent; color:var(--accent-primary);
      border:1px solid var(--border-color); padding:10px 12px;
      border-radius:12px; cursor:pointer; white-space:nowrap;
    }
    .clear-btn:hover { border-color:var(--accent-primary); }

    .table-wrapper {
      width:100%; background:var(--bg-secondary);
      border-radius:16px; box-shadow:var(--shadow);
      overflow:hidden; /* pas de scroll X */
    }
    table { width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
    thead { position:sticky; top:0; background:var(--accent-gradient); z-index:2; }
    thead th {
      padding:14px 10px; text-align:left; font-weight:700; font-size:.9rem;
      color:#fff; text-transform:uppercase; letter-spacing:.4px; cursor:pointer; user-select:none;
      border-bottom:3px solid rgba(255,255,255,.25);
      word-break:break-word; overflow-wrap:anywhere; white-space:normal;
    }
    thead th .arrow { margin-left:6px; opacity:.9; font-size:.85rem; }
    thead th.sort-asc .arrow::after { content:"▲"; }
    thead th.sort-desc .arrow::after { content:"▼"; }

    tbody tr { background:var(--bg-secondary); transition:background .15s ease; }
    tbody tr:nth-child(even) { background:var(--bg-tertiary); }
    tbody tr:hover { background:var(--bg-primary); }

    td {
      padding:12px; border-bottom:1px solid var(--border-color);
      font-size:.92rem; color:var(--text-primary); vertical-align:top;
      word-break:break-word; overflow-wrap:anywhere; white-space:normal;
    }
    /* Colonne # étroite */
    th[data-key="index"] { width:36px; max-width:42px; }
    td.index { width:36px; max-width:42px; text-align:right; color:#8a94b5; font-weight:700; white-space:nowrap; }

    td.method { color:var(--accent-primary); font-weight:600; }

    /* WRAP robuste pour TeX: chaque cellule TeX a un conteneur .tex-wrap */
    .tex-wrap {
      display:block;
      max-width:100%;
      overflow:hidden; /* empêche d’empiéter sur la colonne voisine */
    }
    .tex-inline {
      display:inline;
      word-break:break-word; overflow-wrap:anywhere; white-space:normal;
      line-height:1.35;
    }
    .tex-inline.long { display:block; font-size:0.95em; }

    /* Contraindre le SVG MathJax à rester dans la cellule */
    td:nth-child(3) .mjx-svg,
    td:nth-child(9) .mjx-svg { max-width:100% !important; height:auto !important; }
    .mjx-container {
      overflow:hidden !important; text-overflow:clip !important; white-space:normal !important;
      display:block !important; /* important pour limiter la largeur */
      max-width:100% !important;
    }
    .mjx-container svg { max-width:100% !important; height:auto !important; }

    @media (max-width: 720px) {
      .title { font-size:1.6rem; }
      thead th, td { padding:10px 8px; font-size:.86rem; }
      .toggle { --w:50px; --h:26px; }
      .toggle::after { width:22px; height:22px; }
      .toggle[aria-pressed="true"]::after { transform:translateX(22px); }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header en flex: titre centré, switch à droite (relatif, 1 seul) -->
    <header class="header">
      <div style="flex:0 0 54px;"></div> <!-- espace de symétrie à gauche -->
      <div class="title-wrap">
        <h1 class="title">méthodes d'optimisation classées</h1>
        <p class="subtitle">Tri par colonne, recherche, numérotation, rendu TeX, thème clair/sombre</p>
      </div>
      <div class="theme-toggle">
        <button id="toggleBtn" class="toggle" aria-pressed="false" aria-label="Basculer clair/sombre"></button>
        <span id="toggleText" class="toggle-label">Light</span>
      </div>
    </header>

    <section class="tools">
      <input id="searchBox" class="search-input" type="search" placeholder="Rechercher une méthode, nature, diffusion, formule…"/>
      <button class="clear-btn" onclick="clearSearch()">Effacer</button>
      <div style="color:var(--text-secondary); font-size:.9rem;">Cliquer un en‑tête pour trier ▲▼</div>
    </section>

    <section class="table-wrapper">
      <table id="methodsTable">
        <thead>
          <tr>
            <th data-key="index"># <span class="arrow"></span></th>
            <th data-key="method">Méthode <span class="arrow"></span></th>
            <th data-key="formula">Formule (TeX) <span class="arrow"></span></th>
            <th data-key="memory">Memory <span class="arrow"></span></th>
            <th data-key="conv">Convergence <span class="arrow"></span></th>
            <th data-key="deriv">Dérivé <span class="arrow"></span></th>
            <th data-key="cond">Conditionnement <span class="arrow"></span></th>
            <th data-key="diff">Diffusion <span class="arrow"></span></th>
            <th data-key="diffFormula">Formule Diffusion (TeX) <span class="arrow"></span></th>
            <th data-key="nature">Nature <span class="arrow"></span></th>
            <th data-key="desc">Description <span class="arrow"></span></th>
            <th data-key="link">Lien <span class="arrow"></span></th>
          </tr>
        </thead>
        <tbody id="tableBody"><!-- rendu JS --></tbody>
      </table>
    </section>

    <footer class="footer" style="text-align:center; margin:16px 0 24px;">
      © 2025 thibaut LOMBARD — <a href="https://github.com/Lombard-Web-Services/Docs/" target="_blank" rel="noopener">https://github.com/Lombard-Web-Services/Docs/</a>
    </footer>
  </div>

  <script>
    // Thème (unique switch, relatif)
    const htmlEl = document.documentElement;
    const btn = document.getElementById('toggleBtn');
    const txt = document.getElementById('toggleText');
    btn.addEventListener('click', ()=>{
      const toDark = htmlEl.getAttribute('data-theme') === 'light';
      htmlEl.setAttribute('data-theme', toDark ? 'dark' : 'light');
      btn.setAttribute('aria-pressed', String(toDark));
      txt.textContent = toDark ? 'Dark' : 'Light';
    });

    function escapeHTML(x){ return String(x).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
    function badgeMemory(s){
      if(s.startsWith('Low')) return `<span class="badge low">${s}</span>`;
      if(s.startsWith('Medium')) return `<span class="badge med">${s}</span>`;
      return `<span class="badge high">${s}</span>`;
    }
    function badgeConv(s){
      if(s.startsWith('Linear')) return `<span class="badge lin">${s}</span>`;
      if(s.startsWith('Superlinear')) return `<span class="badge sup">${s}</span>`;
      return `<span class="badge quad">${s}</span>`;
    }

    // Générateur TeX dans un wrap bloc pour empêcher tout débord
    function texSpan(texString){
      const soft = String(texString)
        .replaceAll('+', '\\, +\\, ')
        .replaceAll('=', '\\, =\\, ')
        .replaceAll(',', ',\\, ');
      const long = soft.length > 72 ? ' long' : '';
      return `<div class="tex-wrap"><span class="tex-inline${long}">\\(${soft}\\)</span></div>`;
    }

    // Données (placez ici l’ensemble de votre liste complète)
    const dataRows = [
      {method:"Gradient Descent",formula:"x_{k+1}=x_k-\\alpha\\,\\nabla f(x_k)",memory:"Low O(n)",conv:"Linear",deriv:"1st Order",cond:"Poor (ill‑cond.)",diff:"Locale linéaire",diffFormula:"\\Delta f=\\nabla\\cdot(\\nabla f)",nature:"Isotrope",desc:"Descente de gradient classique.",link:"https://en.wikipedia.org/wiki/Gradient_descent"},
      {method:"Optimal Transport (Wasserstein)",formula:"W_2^2(p,q)=\\inf_{\\pi\\in\\Pi(p,q)}\\int\\|x-y\\|^2\\,d\\pi(x,y)",memory:"High O(n^3)",conv:"Superlinear",deriv:"Implicit Gradient",cond:"Excellent (géométrie lisse)",diff:"Géométrique",diffFormula:"\\Delta_W f=\\mathrm{div}_W(\\nabla_W f)",nature:"Wasserstein",desc:"Optimisation sur l’espace des mesures.",link:"https://en.wikipedia.org/wiki/Wasserstein_metric"},
      {method:"Fisher (Natural Gradient)",formula:"\\theta_{k+1}=\\theta_k-\\alpha\\,F(\\theta_k)^{-1}\\nabla_\\theta L(\\theta_k)",memory:"Medium–High O(n^2)",conv:"Superlinear",deriv:"Quasi‑2nd Order",cond:"Stable (Fisher metric)",diff:"Informationnelle",diffFormula:"\\Delta_F f=F^{-1}\\nabla\\cdot(F\\nabla f)",nature:"Naturel",desc:"Gradient naturel d’Amari.",link:"https://en.wikipedia.org/wiki/Natural_gradient"},
      {method:"Fisher–Rao",formula:"\\langle u,v\\rangle_{\\theta}=\\mathbb E[\\partial_\\theta\\log p_\\theta\\,\\partial_\\theta\\log p_\\theta]",memory:"Medium–High O(n^2)",conv:"Superlinear",deriv:"Quasi‑2nd Order",cond:"Stable (Fisher–Rao)",diff:"Info‑géométrique",diffFormula:"\\Delta_{FR} f=\\mathrm{div}_{FR}(\\nabla_{FR} f)",nature:"Riemannienne proba",desc:"Métrique canonique.",link:"https://en.wikipedia.org/wiki/Fisher_information_metric"},
      {method:"Newton's Method",formula:"x_{k+1}=x_k-H^{-1}\\nabla f(x_k)",memory:"High O(n^2)",conv:"Quadratic",deriv:"2nd Order",cond:"Good (Hessian)",diff:"Locale isotrope",diffFormula:"\\Delta f=\\operatorname{Tr}(H)",nature:"Isotrope linéaire",desc:"Newton classique.",link:"https://en.wikipedia.org/wiki/Newton%27s_method"}
      // ... ajoutez ici toutes vos autres lignes au même format
    ];

    const tbody = document.getElementById('tableBody');
    const thead = document.querySelector('thead');
    const searchBox = document.getElementById('searchBox');

    let sortState = { key:'index', dir:'asc' };
    let view = dataRows.map((r,i)=>({...r, index:i+1}));

    function rowHTML(r){
      return `
        <tr>
          <td class="index">${r.index}</td>
          <td class="method">${escapeHTML(r.method)}</td>
          <td>${texSpan(r.formula)}</td>
          <td>${badgeMemory(r.memory)}</td>
          <td>${badgeConv(r.conv)}</td>
          <td>${escapeHTML(r.deriv)}</td>
          <td>${escapeHTML(r.cond)}</td>
          <td>${escapeHTML(r.diff)}</td>
          <td>${texSpan(r.diffFormula)}</td>
          <td>${escapeHTML(r.nature)}</td>
          <td>${escapeHTML(r.desc)}</td>
          <td><a href="${r.link}" target="_blank" rel="noopener">Lien</a></td>
        </tr>
      `;
    }

    async function typeset(){
      if (window.MathJax && MathJax.typesetPromise) {
        await MathJax.typesetPromise();
      }
    }

    async function render(){
      tbody.innerHTML = view.map(rowHTML).join('');
      await typeset();
    }

    function normalizeForSort(val){
      const s = (val??'').toString().toLowerCase();
      const n = parseFloat(s.replace(/[^\d.+-eE]/g,''));
      return Number.isFinite(n) && /[\d]/.test(s) ? n : s;
    }

    function sortBy(key){
      thead.querySelectorAll('th').forEach(th=>th.classList.remove('sort-asc','sort-desc'));
      if (sortState.key===key) sortState.dir = (sortState.dir==='asc')?'desc':'asc';
      else { sortState.key=key; sortState.dir='asc'; }
      view.sort((a,b)=>{
        const va = normalizeForSort(a[key]);
        const vb = normalizeForSort(b[key]);
        if (typeof va === 'number' && typeof vb === 'number') return va - vb;
        return String(va).localeCompare(String(vb),'fr',{numeric:true,sensitivity:'base'});
      });
      if (sortState.dir==='desc') view.reverse();
      view.forEach((r,i)=>r.index=i+1);
      const th = thead.querySelector(`th[data-key="${key}"]`);
      if (th) th.classList.add(sortState.dir==='asc'?'sort-asc':'sort-desc');
      render();
    }
    thead.querySelectorAll('th').forEach(th=>{
      th.addEventListener('click',()=>sortBy(th.dataset.key));
    });

    function applySearch(){
      const q = searchBox.value.trim().toLowerCase();
      const src = dataRows.map((r,i)=>({...r,index:i+1}));
      view = !q ? src : src.filter(r => Object.values(r).some(v => String(v).toLowerCase().includes(q)));
      // conserver tri en cours
      view.sort((a,b)=>{
        const va = normalizeForSort(a[sortState.key]);
        const vb = normalizeForSort(b[sortState.key]);
        if (typeof va === 'number' && typeof vb === 'number') return va - vb;
        return String(va).localeCompare(String(vb),'fr',{numeric:true,sensitivity:'base'});
      });
      if (sortState.dir==='desc') view.reverse();
      view.forEach((r,i)=>r.index=i+1);
      render();
    }
    function clearSearch(){ searchBox.value=''; applySearch(); }
    window.clearSearch = clearSearch;
    searchBox.addEventListener('input', applySearch);

    // Initial
    sortBy('index');
  </script>
</body>
</html>
